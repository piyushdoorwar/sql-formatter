<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>SQL Formatter & Beautifier</title>
    <link rel="icon" type="image/svg+xml" href="favicon.svg" />
    <link rel="stylesheet" href="styles.css" />
    <script defer src="https://unpkg.com/sql-formatter@15.4.2/dist/sql-formatter.min.js"></script>
    <script defer src="scripts.js"></script>
  </head>
  <body>
    <div class="app-shell">
      <header class="app-header">
        <div>
          <h1>SQL Formatter</h1>
        </div>
      </header>

      <div class="toolbar" id="toolbar">
        <div class="toolbar-group">
          <span class="toolbar-label">File</span>
          <button class="toolbar-btn" onclick="undoEditor()" data-tooltip="Undo (Ctrl+Z)">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M3 7v6h6"/>
              <path d="M21 17a9 9 0 00-9-9 9 9 0 00-6 2.3L3 13"/>
            </svg>
          </button>
          <button class="toolbar-btn" onclick="redoEditor()" data-tooltip="Redo (Ctrl+Y)">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M21 7v6h-6"/>
              <path d="M3 17a9 9 0 019-9 9 9 0 016 2.3l3 2.7"/>
            </svg>
          </button>
          <button class="toolbar-btn" onclick="copyEditor()" data-tooltip="Copy formatted SQL">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <rect x="9" y="9" width="13" height="13" rx="2" ry="2"/>
              <path d="M5 15H4a2 2 0 01-2-2V4a2 2 0 012-2h9a2 2 0 012 2v1"/>
            </svg>
          </button>
          <button class="toolbar-btn" onclick="downloadFormattedSql()" data-tooltip="Download formatted SQL">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4"/>
              <polyline points="7 10 12 15 17 10"/>
              <line x1="12" y1="15" x2="12" y2="3"/>
            </svg>
          </button>
          <button class="toolbar-btn" onclick="loadSampleSql()" data-tooltip="Load sample SQL">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <rect x="3" y="4" width="14" height="16" rx="2" ry="2"/>
              <path d="M7 8h6M7 12h6M7 16h4"/>
              <path d="M17 8h4v12a2 2 0 01-2 2H9"/>
            </svg>
          </button>
          <button class="toolbar-btn" onclick="pasteEditor()" data-tooltip="Paste (Ctrl+V)">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M16 4h2a2 2 0 012 2v14a2 2 0 01-2 2H6a2 2 0 01-2-2V6a2 2 0 012-2h2"/>
              <rect x="8" y="2" width="8" height="4" rx="1" ry="1"/>
            </svg>
          </button>
        </div>

        <div class="toolbar-divider"></div>

        <div class="toolbar-group">
          <span class="toolbar-label">Database</span>
          <button class="toolbar-icon-btn active" id="dialect-btn" title="Standard SQL (auto-selected)">
            <svg viewBox="0 0 24 24" fill="currentColor" id="dialect-icon">
              <ellipse cx="12" cy="5" rx="9" ry="3"/>
              <path d="M3 5v14c0 1.66 4 3 9 3s9-1.34 9-3V5" fill="none" stroke="currentColor" stroke-width="1.5"/>
              <path d="M3 12c0 1.66 4 3 9 3s9-1.34 9-3" fill="none" stroke="currentColor" stroke-width="1.5"/>
            </svg>
          </button>
        </div>

        <div class="toolbar-group">
          <span class="toolbar-label">Settings</span>
          <button class="toolbar-btn" onclick="openModal('settingsModal')" data-tooltip="Settings">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M3 7h8m-8 10h8m6-10h4m-4 10h4M10 7a4 4 0 108 0 4 4 0 00-8 0zm0 10a4 4 0 108 0 4 4 0 00-8 0z"></path>
            </svg>
          </button>
        </div>

      </div>

      <main class="workspace">
        <section class="panel">
          <div class="panel-header">
            <span id="sql-input-title">SQL Input</span>
            <span class="hint" id="sql-type-hint">SQL</span>
          </div>
          <div class="editor-container">
            <div class="line-numbers" id="line-numbers"></div>
            <textarea id="editor" spellcheck="false"></textarea>
          </div>
        </section>

        <div class="resizer" id="resizer"></div>

        <section class="panel right-panel">
          <div class="panel-header panel-header-output">
            <span>Output</span>
            <span class="hint">Formatted SQL</span>
          </div>
          <div class="editor-container">
            <div class="output-line-numbers" id="output-line-numbers"></div>
            <textarea id="output-editor" class="output-editor" spellcheck="false" readonly wrap="off"></textarea>
          </div>
        </section>
      </main>
    </div>

    <!-- Combined Settings Modal -->
    <div class="modal" id="settingsModal">
      <div class="modal-content modal-content-wide">
        <div class="modal-header">
          <h2>Settings</h2>
          <button class="modal-close" onclick="closeModal('settingsModal')">&times;</button>
        </div>
        <div class="modal-body modal-body-split">
          <div class="modal-section">
            <h3 class="modal-section-title">Case Settings</h3>
          <div class="form-group inline-case">
            <label>Keywords Case:</label>
            <div class="case-btn-group">
              <button class="case-btn" data-setting="keywordCase" data-value="upper" data-tooltip="Uppercase" title="Uppercase">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <text x="12" y="12" text-anchor="middle" dominant-baseline="middle" font-size="12" font-weight="700" fill="currentColor" stroke="none">AA</text>
                </svg>
              </button>
              <button class="case-btn" data-setting="keywordCase" data-value="lower" data-tooltip="Lowercase" title="Lowercase">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <text x="12" y="12" text-anchor="middle" dominant-baseline="middle" font-size="12" font-weight="600" fill="currentColor" stroke="none">aa</text>
                </svg>
              </button>
              <button class="case-btn active" data-setting="keywordCase" data-value="unchanged" data-tooltip="Unchanged" title="Unchanged">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M5 12h14M5 8h14M5 16h14"/>
                </svg>
              </button>
            </div>
          </div>
          <div class="form-group inline-case">
            <label>Datatype Case:</label>
            <div class="case-btn-group">
              <button class="case-btn" data-setting="dataTypeCase" data-value="upper" data-tooltip="Uppercase" title="Uppercase">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <text x="12" y="12" text-anchor="middle" dominant-baseline="middle" font-size="12" font-weight="700" fill="currentColor" stroke="none">AA</text>
                </svg>
              </button>
              <button class="case-btn" data-setting="dataTypeCase" data-value="lower" data-tooltip="Lowercase" title="Lowercase">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <text x="12" y="12" text-anchor="middle" dominant-baseline="middle" font-size="12" font-weight="600" fill="currentColor" stroke="none">aa</text>
                </svg>
              </button>
              <button class="case-btn active" data-setting="dataTypeCase" data-value="unchanged" data-tooltip="Unchanged" title="Unchanged">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M5 12h14M5 8h14M5 16h14"/>
                </svg>
              </button>
            </div>
          </div>
          <div class="form-group inline-case">
            <label>Function Case:</label>
            <div class="case-btn-group">
              <button class="case-btn" data-setting="functionCase" data-value="upper" data-tooltip="Uppercase" title="Uppercase">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <text x="12" y="12" text-anchor="middle" dominant-baseline="middle" font-size="12" font-weight="700" fill="currentColor" stroke="none">AA</text>
                </svg>
              </button>
              <button class="case-btn" data-setting="functionCase" data-value="lower" data-tooltip="Lowercase" title="Lowercase">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <text x="12" y="12" text-anchor="middle" dominant-baseline="middle" font-size="12" font-weight="600" fill="currentColor" stroke="none">aa</text>
                </svg>
              </button>
              <button class="case-btn" data-setting="functionCase" data-value="initcap" data-tooltip="InitCap" title="InitCap">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <text x="12" y="12" text-anchor="middle" dominant-baseline="middle" font-size="12" font-weight="600" fill="currentColor" stroke="none">Aa</text>
                </svg>
              </button>
              <button class="case-btn active" data-setting="functionCase" data-value="unchanged" data-tooltip="Unchanged" title="Unchanged">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M5 12h14M5 8h14M5 16h14"/>
                </svg>
              </button>
            </div>
          </div>
          <div class="form-group inline-case">
            <label>
              <span>Identifiers Case</span>
              <small class="field-subtitle">(table/column/alias)</small>
            </label>
            <div class="case-btn-group">
              <button class="case-btn" data-setting="identifiersCase" data-value="upper" data-tooltip="Uppercase" title="Uppercase">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <text x="12" y="12" text-anchor="middle" dominant-baseline="middle" font-size="12" font-weight="700" fill="currentColor" stroke="none">AA</text>
                </svg>
              </button>
              <button class="case-btn" data-setting="identifiersCase" data-value="lower" data-tooltip="Lowercase" title="Lowercase">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <text x="12" y="12" text-anchor="middle" dominant-baseline="middle" font-size="12" font-weight="600" fill="currentColor" stroke="none">aa</text>
                </svg>
              </button>
              <button class="case-btn" data-setting="identifiersCase" data-value="initcap" data-tooltip="InitCap" title="InitCap">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <text x="12" y="12" text-anchor="middle" dominant-baseline="middle" font-size="12" font-weight="600" fill="currentColor" stroke="none">Aa</text>
                </svg>
              </button>
              <button class="case-btn active" data-setting="identifiersCase" data-value="unchanged" data-tooltip="Unchanged" title="Unchanged">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M5 12h14M5 8h14M5 16h14"/>
                </svg>
              </button>
            </div>
          </div>
          <div class="form-group inline-case">
            <label>Variable Case:</label>
            <div class="case-btn-group">
              <button class="case-btn" data-setting="variableCase" data-value="upper" data-tooltip="Uppercase" title="Uppercase">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <text x="12" y="12" text-anchor="middle" dominant-baseline="middle" font-size="12" font-weight="700" fill="currentColor" stroke="none">AA</text>
                </svg>
              </button>
              <button class="case-btn" data-setting="variableCase" data-value="lower" data-tooltip="Lowercase" title="Lowercase">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <text x="12" y="12" text-anchor="middle" dominant-baseline="middle" font-size="12" font-weight="600" fill="currentColor" stroke="none">aa</text>
                </svg>
              </button>
              <button class="case-btn" data-setting="variableCase" data-value="initcap" data-tooltip="InitCap" title="InitCap">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <text x="12" y="12" text-anchor="middle" dominant-baseline="middle" font-size="12" font-weight="600" fill="currentColor" stroke="none">Aa</text>
                </svg>
              </button>
              <button class="case-btn active" data-setting="variableCase" data-value="unchanged" data-tooltip="Unchanged" title="Unchanged">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M5 12h14M5 8h14M5 16h14"/>
                </svg>
              </button>
            </div>
          </div>
          <div class="form-group inline-case">
            <label>Quoted Identifier Case:</label>
            <div class="case-btn-group">
              <button class="case-btn" data-setting="quotedIdentifierCase" data-value="upper" data-tooltip="Uppercase" title="Uppercase">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <text x="12" y="12" text-anchor="middle" dominant-baseline="middle" font-size="12" font-weight="700" fill="currentColor" stroke="none">AA</text>
                </svg>
              </button>
              <button class="case-btn" data-setting="quotedIdentifierCase" data-value="lower" data-tooltip="Lowercase" title="Lowercase">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <text x="12" y="12" text-anchor="middle" dominant-baseline="middle" font-size="12" font-weight="600" fill="currentColor" stroke="none">aa</text>
                </svg>
              </button>
              <button class="case-btn" data-setting="quotedIdentifierCase" data-value="initcap" data-tooltip="InitCap" title="InitCap">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <text x="12" y="12" text-anchor="middle" dominant-baseline="middle" font-size="12" font-weight="600" fill="currentColor" stroke="none">Aa</text>
                </svg>
              </button>
              <button class="case-btn active" data-setting="quotedIdentifierCase" data-value="unchanged" data-tooltip="Unchanged" title="Unchanged">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M5 12h14M5 8h14M5 16h14"/>
                </svg>
              </button>
            </div>
          </div>
          </div>
          <div class="modal-section">
            <h3 class="modal-section-title">Layout Settings</h3>
    <select id="stylePreset" style="display:none;">
      <option value="default" selected>Default</option>
      <option value="indented">Indented</option>
      <option value="collapsed">Collapsed</option>
      <option value="commasBefore">Commas Before</option>
      <option value="rightAligned">Right Aligned</option>
    </select>
    <select id="keywordCase" style="display:none;">
      <option value="upper">Uppercase</option>
      <option value="lower">Lowercase</option>
      <option value="unchanged" selected>Unchanged</option>
    </select>
    <select id="dataTypeCase" style="display:none;">
      <option value="upper">Uppercase</option>
      <option value="lower">Lowercase</option>
      <option value="unchanged" selected>Unchanged</option>
    </select>
    <select id="functionCase" style="display:none;">
      <option value="upper">Uppercase</option>
      <option value="lower">Lowercase</option>
      <option value="initcap">InitCap</option>
      <option value="unchanged" selected>Unchanged</option>
    </select>
    <select id="identifiersCase" style="display:none;">
      <option value="upper">Uppercase</option>
      <option value="lower">Lowercase</option>
      <option value="initcap">InitCap</option>
      <option value="unchanged" selected>Unchanged</option>
    </select>
    <select id="variableCase" style="display:none;">
      <option value="upper">Uppercase</option>
      <option value="lower">Lowercase</option>
      <option value="initcap">InitCap</option>
      <option value="unchanged" selected>Unchanged</option>
    </select>
    <select id="quotedIdentifierCase" style="display:none;">
      <option value="upper">Uppercase</option>
      <option value="lower">Lowercase</option>
      <option value="initcap">InitCap</option>
      <option value="unchanged" selected>Unchanged</option>
    </select>
    <select id="commaLinebreak" style="display:none;">
      <option value="after" selected>After</option>
      <option value="before">Before</option>
      <option value="beforeSpace">Before with space</option>
    </select>
    <select id="listStyle" style="display:none;">
      <option value="stacked" selected>Stacked</option>
      <option value="notStacked">Not Stacked</option>
    </select>


          <div class="form-group inline-case">
            <label>Styles:</label>
            <div class="case-btn-group">
              <button class="case-btn active" data-setting="stylePreset" data-value="default" title="Default">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round">
                  <line x1="7" y1="6" x2="20" y2="6"/>
                  <line x1="7" y1="12" x2="20" y2="12"/>
                  <line x1="7" y1="18" x2="20" y2="18"/>
                  <circle cx="4" cy="6" r="1" fill="currentColor"/>
                  <circle cx="4" cy="12" r="1" fill="currentColor"/>
                  <circle cx="4" cy="18" r="1" fill="currentColor"/>
                </svg>
              </button>
              <button class="case-btn" data-setting="stylePreset" data-value="indented" title="Indented">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <line x1="4" y1="6" x2="20" y2="6"/>
                  <line x1="8" y1="10" x2="20" y2="10"/>
                  <line x1="8" y1="14" x2="20" y2="14"/>
                  <line x1="4" y1="18" x2="20" y2="18"/>
                  <polyline points="6 8 8 10 6 12" stroke-width="1.5"/>
                </svg>
              </button>
              <button class="case-btn" data-setting="stylePreset" data-value="collapsed" title="Collapsed">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round">
                  <rect x="4" y="5" width="16" height="4" rx="1"/>
                  <rect x="4" y="10" width="16" height="4" rx="1"/>
                  <rect x="4" y="15" width="8" height="4" rx="1"/>
                </svg>
              </button>
              <button class="case-btn" data-setting="stylePreset" data-value="commasBefore" title="Commas Before">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round">
                  <line x1="9" y1="7" x2="20" y2="7"/>
                  <line x1="9" y1="12" x2="20" y2="12"/>
                  <line x1="9" y1="17" x2="20" y2="17"/>
                  <circle cx="5" cy="12" r="1.5" fill="currentColor"/>
                  <circle cx="5" cy="17" r="1.5" fill="currentColor"/>
                </svg>
              </button>
              <button class="case-btn" data-setting="stylePreset" data-value="rightAligned" title="Right Aligned">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round">
                  <line x1="20" y1="6" x2="10" y2="6"/>
                  <line x1="20" y1="12" x2="4" y2="12"/>
                  <line x1="20" y1="18" x2="7" y2="18"/>
                  <line x1="21" y1="3" x2="21" y2="21" stroke-width="2.5"/>
                </svg>
              </button>
            </div>
          </div>
          <div class="form-group inline-case">
            <label>Linebreaks with Comma:</label>
            <div class="case-btn-group">
              <button class="case-btn active" data-setting="commaLinebreak" data-value="after" title="After">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <line x1="4" y1="7" x2="13" y2="7"/>
                  <circle cx="15" cy="7" r="1.2" fill="currentColor"/>
                  <path d="M17 8 L17 15 L21 15"/>
                  <polyline points="19 13 21 15 19 17"/>
                </svg>
              </button>
              <button class="case-btn" data-setting="commaLinebreak" data-value="before" title="Before">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <line x1="4" y1="7" x2="20" y2="7"/>
                  <path d="M6 9 L6 15 L14 15"/>
                  <polyline points="8 13 6 15 4 13"/>
                  <circle cx="16" cy="15" r="1.2" fill="currentColor"/>
                  <line x1="18" y1="15" x2="20" y2="15"/>
                </svg>
              </button>
              <button class="case-btn" data-setting="commaLinebreak" data-value="beforeSpace" title="Before with space">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <line x1="4" y1="7" x2="20" y2="7"/>
                  <path d="M5 9 L5 15 L13 15"/>
                  <polyline points="7 13 5 15 3 13"/>
                  <circle cx="17" cy="15" r="1.2" fill="currentColor"/>
                  <line x1="19" y1="15" x2="20" y2="15"/>
                </svg>
              </button>
            </div>
          </div>
          <div class="form-group inline-case">
            <label>List and Parameters Style:</label>
            <div class="case-btn-group">
              <button class="case-btn active" data-setting="listStyle" data-value="stacked" title="Stacked">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round">
                  <rect x="5" y="5" width="14" height="3.5" rx="1.5"/>
                  <rect x="5" y="10.25" width="14" height="3.5" rx="1.5"/>
                  <rect x="5" y="15.5" width="14" height="3.5" rx="1.5"/>
                </svg>
              </button>
              <button class="case-btn" data-setting="listStyle" data-value="notStacked" title="Not Stacked">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round">
                  <rect x="3" y="9" width="5" height="6" rx="1.5"/>
                  <rect x="9.5" y="9" width="5" height="6" rx="1.5"/>
                  <rect x="16" y="9" width="5" height="6" rx="1.5"/>
                </svg>
              </button>
            </div>
          </div>
          <div class="form-group">
            <label class="modal-checkbox">
              <input id="andOrUnderWhere" type="checkbox" checked />
              <span>AND/OR under WHERE</span>
            </label>
          </div>
          <div class="form-group">
            <label class="modal-checkbox">
              <input id="removeLinebreakBeforeBeautify" type="checkbox" />
              <span>Remove linebreak before beautify</span>
            </label>
          </div>
          <div class="form-group">
            <label class="modal-checkbox">
              <input id="minify" type="checkbox" />
              <span>SQL Minify</span>
            </label>
          </div>
          <div class="form-group">
            <label class="modal-checkbox">
              <input id="removeComments" type="checkbox" />
              <span>Remove Comments</span>
            </label>
          </div>
          </div>
        </div>
        <div class="modal-footer">
          <button class="btn btn-primary" onclick="closeModal('settingsModal')">Done</button>
        </div>
      </div>
    </div>
    
    <!-- Hidden select elements for case settings (used by JS) -->
    <!-- Cloudflare Web Analytics --><script defer src='https://static.cloudflareinsights.com/beacon.min.js' data-cf-beacon='{"token": "e9cd556fb46f4880a8842d37e2dfe3fb"}'></script><!-- End Cloudflare Web Analytics -->
  </body>
</html>
